<?xml version="1.0"?>
<TeamMentor_Article Metadata_Hash="1789708609" Content_Hash="-919088354">
  <Metadata>
    <Id>49879868-e26c-45c7-996a-8c356976b0f5</Id>
    <Id_History>49879868-e26c-45c7-996a-8c356976b0f5,324b48f0-b853-4171-a28d-2d977247dba0,</Id_History>
    <Library_Id>be5273b1-d682-4361-99d9-6234f2d47eb7</Library_Id>
    <Title>[SINK] Configuration Sections That Contain Sensitive Data Are Encrypted Using Protected Configuration Providers</Title>
    <Category>Hardening</Category>
    <Phase>Deployment</Phase>
    <Technology>.NET 3.5</Technology>
    <Type>Checklist Item</Type>
    <DirectLink>Configuration Sections That Contain Sensitive Data Are Encrypted Using Protected Configuration Providers</DirectLink>
    <Tag />
    <Security_Demand />
    <Author />
    <Priority>2</Priority>
    <Status />
    <Source>SI</Source>
  </Metadata>
  <Content Sanitized="true" DataType="Html">
    <Data><![CDATA[<h1>What to Check For</h1>
  <p>Check to ensure that your application encrypts the configuration sections that contain sensitive data by using protected configuration providers.</p>
  <h1>How to Fix</h1>
  <p>In ASP.NET, you can use either the DPAPI or RSA protected configuration providers to encrypt specific sections that contain sensitive data. The sections that usually contain sensitive information that you need to encrypt include &lt;<b>appSettings</b>&gt;, &lt;<b>connectionStrings</b>&gt;, &lt;<b>identity</b>&gt;, and &lt;<b>sessionState</b>&gt;.</p>
  <p>To encrypt the &lt;<b>connectionStrings</b>&gt; section by using the DPAPI provider with the machine-key store (the default configuration), run the following command from a command window:</p>
  <p>
    <b>aspnet_regiis -pe "connectionStrings" -app "/MachineDPAPI" -prov "DataProtectionConfigurationProvider"</b>
  </p>
  <ul>
    <li>-<b>pe</b>: Specifies the configuration section to encrypt. <li>-<b>app</b>: Specifies your Web application's virtual path. If your application is nested, you need to specify the nested path from the root directory; for example, "/test/aspnet/MachineDPAPI". <li><b>-prov</b>: Specifies the provider name. </li></li></li>
  </ul>
  <p>If you need to encrypt configuration file data on multiple servers in a Web farm, you should use RSA protected configuration provider because of the ease with which you can export RSA key containers. </p>
  <hr />
  <p>Adapted from Microsoft patterns &amp; practices guidance. </p>]]></Data>
  </Content>
</TeamMentor_Article>