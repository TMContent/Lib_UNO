<?xml version="1.0"?>
<TeamMentor_Article Metadata_Hash="905408629" Content_Hash="-1929583414">
  <Metadata>
    <Id>058b6e7b-bfd5-4e6d-8958-2d5b92dfb5ed</Id>
    <Id_History>058b6e7b-bfd5-4e6d-8958-2d5b92dfb5ed,e81ac2ef-15b0-4b87-b2d2-9c9a04405ec4,</Id_History>
    <Library_Id>be5273b1-d682-4361-99d9-6234f2d47eb7</Library_Id>
    <Title>How to Delay-sign An Assembly With A Strong Name</Title>
    <Category>Hardening</Category>
    <Phase>Deployment</Phase>
    <Technology>.NET 3.5</Technology>
    <Type>How To</Type>
    <DirectLink>How to Delay-sign An Assembly With A Strong Name</DirectLink>
    <Tag />
    <Security_Demand />
    <Author />
    <Priority />
    <Status />
    <Source>SI</Source>
  </Metadata>
  <Content Sanitized="true" DataType="Html">
    <Data><![CDATA[<h1>Description</h1>
  <p>By using delay signing, you can restrict access to your company's private key. Members of the development team only require access to your company's public key. Use .snk files if you need to delay sign your assemblies. </p>
  <ul>
    <li>Create a key pair for your organization with the following command:</li>
  </ul>
  <pre>sn.exe -k keypair.snk </pre>
  <ul>
    <li>Use the following command to extract the public key from the key pair file:</li>
  </ul>
  <pre>sn -p keypair.snk publickey.snk </pre>
  <p>Secure Keypair.snk, which contains both the private and public keys. For example, put it on a compact disc, and physically secure it. Then make Publickey.snk available to all developers. For example, put it on a network share. </p>
  <p>To delay sign the assembly, click the <b>Signing</b> tab from the project properties page in Visual Studio, and then select the <b>Sign the assembly</b> and <b>Delay sign only</b> check boxes. Select your strong-name key file and then build your assembly. </p>
  <blockquote>
    <b>Note</b>&amp;nbsp;&amp;nbsp;&amp;nbsp;A delay-signed project will not run and cannot be debugged. You can, however, use the Strong Name Tool (Sn.exe) with the <b>-Vr</b> option to skip verification during development.</blockquote>
  <p>The delay signing process and the absence of an assembly signature mean that the assembly will fail verification at load time. To work around this, to disable verification for a specific assembly, use the following command: </p>
  <pre>sn -Vr assembly.dll </pre>
  <p>To disable verification for all assemblies that have a particular public key, use the following command: </p>
  <pre>sn -Vr &amp;#42;,publickeytoken </pre>
  <p>To extract the public key and key token (a truncated hash of the public key), use the following command: </p>
  <pre>sn -Tp assembly.dll </pre>
  <blockquote>
    <b>Note</b>&amp;nbsp;&amp;nbsp;&amp;nbsp;Use an uppercase <b>-T</b> switch.<b></b></blockquote>
  <p>To fully complete the signing process and create a digital signature to restrict access to the assembly, use the following command. This requires the private key, and as a result, the operation is normally performed as part of the formal build and release process. The following command re-signs an assembly called Assembly.dll with a strong name using the Keypair.snk key file. </p>
  <pre>sn -R assembly.dll keypair.snk </pre>
  <hr />
  <p>Adapted from Microsoft patterns &amp; practices guidance.</p>]]></Data>
  </Content>
</TeamMentor_Article>