<?xml version="1.0"?>
<TeamMentor_Article Metadata_Hash="-1986189429" Content_Hash="2113298829">
  <Metadata>
    <Id>ae82e8d6-6ef5-405a-9fd7-58cb40777b1e</Id>
    <Id_History>b5060c06-60f0-419e-93cf-546ea4ba6a78,</Id_History>
    <Library_Id>ea854894-8e16-46c8-9c61-737ef46d7e82</Library_Id>
    <Title>Use Absolute URLs for Navigation Where Site Is Partitioned into Secure And Insecure Folders</Title>
    <Category>Forms Authentication</Category>
    <Phase>Implementation</Phase>
    <Technology>ASP.NET 2.0</Technology>
    <Type>Guideline</Type>
    <DirectLink>Use Absolute URLs for Navigation Where Site Is Partitioned into Secure And Insecure Folders</DirectLink>
    <Tag />
    <Security_Demand />
    <Author />
    <Priority> J.D. Meier, Alex Mackman, Blaine Wastell, Prashant Bansode, Andy Wigley, Kishore Gopalan</Priority>
    <Status />
    <Source>SI</Source>
  </Metadata>
  <Content Sanitized="true" DataType="Html">
    <Data><![CDATA[<h1>Applies to</h1>
  <ul>
    <li>ASP.NET 2.0 </li>
  </ul>
  <h1>What to Do</h1>
  <p>Absolute URLs are used for navigation where the site is partitioned with secure and non-secure folders. </p>
  <h1>How</h1>
  <p>Navigating between the public and restricted areas of your site (that is, between HTTP and HTTPS pages) is an issue because a redirect always uses the protocol (HTTPS or HTTP) of the current page, not the target page.</p>
  <p>After a user logs on and browses pages in a directory that is secured with SSL, relative links such as "..\publicpage.aspx" or redirects to HTTP pages result in the pages being served using the HTTPS protocol, which incurs an unnecessary performance overhead. To avoid this, use absolute links such as "http://servername/appname/publicpage.aspx" when redirecting from an HTTPS page to an HTTP page.</p>
  <p>Similarly, when you redirect to a secure page (for example, the logon page) from a public area of your site, you must use an absolute HTTPS path, such as "https://servername/appname/secure/login.aspx" instead of a relative path, such as "restricted/login.aspx." For example, if your Web page provides a logon button, use the following code to redirect to the secure login page.</p>
  <pre>private void btnLogon_Click( object sender, System.EventArgs e )<br />{<br />  // Form an absolute path using the server name and v-dir name  <br />	string serverName = HttpUtility.UrlEncode(Request.ServerVariables["SERVER_NAME"]);  <br />	string vdirName = Request.ApplicationPath;  <br />	Response.Redirect("https://" + serverName + vdirName + "/Restricted/Login.aspx");<br />}</pre>
  <p />
  <br />
  <p />
  <p />
  <hr />
  <p>Adapted from Microsoft patterns &amp; practices guidance.</p>]]></Data>
  </Content>
</TeamMentor_Article>