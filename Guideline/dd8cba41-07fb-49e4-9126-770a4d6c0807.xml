<?xml version="1.0"?>
<TeamMentor_Article Metadata_Hash="552114844" Content_Hash="-1202299423">
  <Metadata>
    <Id>dd8cba41-07fb-49e4-9126-770a4d6c0807</Id>
    <Id_History>dd8cba41-07fb-49e4-9126-770a4d6c0807,f91bb2a3-a2ac-46e7-82bc-19d6ac429437,</Id_History>
    <Library_Id>be5273b1-d682-4361-99d9-6234f2d47eb7</Library_Id>
    <Title>Use the Same MachineKey for All Servers in a Web Farm</Title>
    <Category>Hardening</Category>
    <Phase>Deployment</Phase>
    <Technology>.NET 3.5</Technology>
    <Type>Guideline</Type>
    <DirectLink>Use the Same MachineKey for All Servers in a Web Farm</DirectLink>
    <Tag />
    <Security_Demand />
    <Author />
    <Priority>2</Priority>
    <Status />
    <Source>SI</Source>
  </Metadata>
  <Content Sanitized="true" DataType="Html">
    <Data><![CDATA[<h1>What to Do</h1>
  <p>Ensure that the configuration files on each server share hashing and encryption keys. </p>
  <h1>Why</h1>
  <p>These are used by ASP.NET to protect ViewState and forms authentication tickets. Manually generated, common keys are required because you cannot guarantee which server will handle successive requests. </p>
  <h1>When</h1>
  <p>This is valid whenever an application is deployed in a web farm.</p>
  <h1>Solution Example</h1>
  <p>With manually generated key values, the &lt;MACHINEKEY&gt;settings should be similar to the following example.</p>
  <pre>&lt;machineKey validationKey="21F090935F6E49C2C797F69BBAAD8402ABD2EE0B667A8B4<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4EA7DD4374267A75D7AD972A119482D15A4127461DB1DC347C1A63AE5F1CCFAACFF1B72A7F0A281B"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; decryptionKey="261F793EB53B761503AC445E0CA28DA44AA9B3CF06263B77"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; decryption="3DES"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; validation="SHA1" /&gt; </pre>
  <hr />
  <p>Adapted from Microsoft patterns & practices guidance. </p>]]></Data>
  </Content>
</TeamMentor_Article>